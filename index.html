<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="./css/style.css" rel="stylesheet" </head>

<body>
    <div class="main">
        <div class="upper">


            <h1>The Pictionary Game- Play with Friends</h1>
            <form action="" id="room">
                <section class="join">
                    <h2>Create Room</h2>
                    <h3>Username</h3>
                    <input type="text" id="name" placeholder="Enter Your Name"><br>
                    <button type="submit" class="btn1">Create Room</button>
                </section>

            </form>
        </div>

        <hr class="mid">
        <div class="down">
            <section class="lower">
                <h2>Join Room</h2>
                <form action="" id="room2">
                    <h3>Username</h3>
                    <input type="text" id="name2" placeholder="Enter Your Name"><br>
                    <h3>Room Id</h3>
                    <input type="text" id="room_id" placeholder="Enter Room ID"><br>
                    <a href="draw.html"><button type="button" id="btn2">Join Room</button></a>

            </section>

            </form>


        </div>
        <div id="message"></div>
    </div>
    


    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script>
        const socket = io();
        const username = document.getElementById("name2");
        const room_id = document.getElementById("room_id");
        const btn2 = document.getElementById("btn2");
        const user = document.getElementById("message");

        btn2.addEventListener("click", (e) => {
            e.preventDefault();
            
            const u_name = username.value;
            const r_id = room_id.value;
            console.log(u_name, r_id);
            socket.emit('join_room',u_name, r_id);
            window.location.href="draw.html";
        })

        // const form = document.getElementById("room2").addEventListener("submit",(e)=>{
        //     e.preventDefault();
        //     const user_name = username.value;
        //     const room_ID = room_id.value;
        //     socket.emit("Create_room",user_name,room_ID);

        // }) 
        // socket.on("User_connected",(username,room_id)=>{
        //     alert(`you are connected with user name : ${username} room_id: ${room_id}`);
        // })
        socket.on("joined_room", (username, room_id) => {
            // alert(`joined room with username:${username}, room : ${room_id}`);
            const p = document.createElement('p');
            p.innerText = username;
            user.appendChild(p);
        });
    </script>
   
    <!-- <script src="script.js"></script> -->


</body>

</html>
